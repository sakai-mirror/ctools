<project name="build-search" basedir="." default="info" >

  <!--

   $Id: build-search.xml 15158 2006-09-22 20:13:42Z dlhaines@umich.edu $
   $HeadURL: https://source.sakaiproject.org/svn/ctools/trunk/builds/ctools_2-2/tools/build-search.xml $
   
   Add search podcast tool
 
  -->

  <!-- 
       TTD:
  -->


  <target name="searchInfo">
    <echo>
      This will extract the iTuneU podcasting tool. It should be called by the master build.xml not directly.

      The configuration values are:
      search.install.skip = ${search.install.skip}
      search.svnurl = ${search.svnurl}
      search.revision = ${search.revision}
    </echo>
  </target>


  <!-- ================================================== -->
  <!--    deal with User Membership specific source       -->
  <!-- ================================================== -->

  <target name="getSearchSrc" unless="search.install.skip">
    <echo>
      Extracting search tool: ${search.svnurl} revision: ${search.revision}.
    </echo>

    <removeFromBuild deleteDir="search" />
    <delete file="${build.dir}/project.xml" />

    <execSvnCmd url="${search.svnurl}" revision="${search.revision}" dir="${build.dir}/search"/> 

    <!--
    Take these out individually since if take out as a group project.xml overwrites an important one.
    -->
<!--    <execSvnCmd url="${search.svnurl}" revision="${search.revision}" dir="${build.dir}"/>  -->
<!--
    <execSvnCmd url="${search.svnurl}/search-api" revision="${search.revision}" dir="${build.dir}/search-api"/> 
    <execSvnCmd url="${search.svnurl}/search-help" revision="${search.revision}" dir="${build.dir}/search-help"/> 
    <execSvnCmd url="${search.svnurl}/search-impl" revision="${search.revision}" dir="${build.dir}/search-impl"/> 
    <execSvnCmd url="${search.svnurl}/search-integration-test" revision="${search.revision}" dir="${build.dir}/search-integration-test"/> 
    <execSvnCmd url="${search.svnurl}/search-model" revision="${search.revision}" dir="${build.dir}/search-model"/> 
    -->

    <!-- take out the extra level of reference for the master/project.xml -->
    <!-- 
    <echo> search: adjust path to master project.xml</echo>
    <echo> build.dir ${build.dir}</echo>

    <replaceregexp>

      <fileset dir="${build.dir}" >
	<include name="search*/**/project.xml"/>
      </fileset>

      <regexp pattern="\.\./\.\./master/project.xml" />
      <substitution  expression="../master/project.xml" />
    </replaceregexp>
    -->
    <!--
    <replaceregexp 
	file="${build.dir}/search/tool/project.xml"  >
      <regexp pattern="\.\./\.\./master/project.xml" />
      <substitution  expression="../master/project.xml" />
    </replaceregexp>
     -->

  </target>

</project>
